<!DOCTYPE html>
<html>

	
	    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <meta content="RxJava操作符之Creating Observables" name="description">
  
  
    <meta name="keywords" content="rxjava">
  
  <meta name="author" content="Chuck">

  <title>
    
        Chuck|RxJava操作符之Creating Observables
    
  </title>
  <!-- favicon -->
  <link rel="shortcut icon" href="/static/img/favicon.ico">

  <!-- Third-party CSS -->
  <link href="/bower_components/normalize-css/normalize.min.css" rel="stylesheet">
  <link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/bower_components/animate.css/animate.min.css" rel="stylesheet">
  <link href="/bower_components/components-font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="/static/font-mfizz/font-mfizz.css" rel="stylesheet">
  <!-- <link href="/bower_components/toastr/toastr.min.css" rel="stylesheet"> -->
  <link href="/bower_components/jquery.gritter/css/jquery.gritter.css" rel="stylesheet">
  <link rel="stylesheet" href="/search/css/cb-search.css">

  <!-- Custom styles for this template -->
  <link href="/static/css/style.min.css" rel="stylesheet">
  <link href="/static/css/pygments.css" rel="stylesheet">

  <!-- Scripts -->
  <script src="/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="/search/js/bootstrap3-typeahead.min.js"></script>

  <!-- cb-search -->
  <script src="/search/js/cb-search.js"></script>
  <script>
    $(function(){
        $("pre").css('display','block');
    });
  </script>
  <!-- Mainly scripts -->
  <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/bower_components/metisMenu/dist/metisMenu.min.js"></script>
  <script src="/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>

  <!-- Peity -->
  <script src="/bower_components/peity/jquery.peity.min.js"></script>

  <script src="/bower_components/PACE/pace.min.js"></script>
  <script src="/bower_components/wow/dist/wow.min.js"></script>
  <!-- Custom and plugin javascript -->
  <script src="/static/js/inspinia.js"></script>

  <!-- Rickshaw -->
  <script src="/bower_components/rickshaw/vendor/d3.v3.js"></script>
  <script src="/bower_components/rickshaw/rickshaw.min.js"></script>


  <!-- jPages -->
  <script src="/static/js/jPages.js"></script>
  <script src="/static/js/js.js"></script>
  <script id="dsq-count-scr" src="//jalpc.disqus.com/count.js" async></script>
  <script type="text/javascript">
        $(function(){
          /* initiate the plugin */
          $("div.pag-holder").jPages({
              containerID  : "pag-itemContainer",
              perPage      : 5,  /* num of items per page */
              startPage    : 1,
              startRange   : 1,
              midRange     : 3,
              endRange     : 1
          });
      });
  </script>

<!-- GrowingIO -->


</head>

	


<body id="page-top" class="landing-page">

	
	    <div class="search-tool"
      style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">
    <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog">

    <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;">
        <img src="/search/img/cb-close.png" id="close-btn"/>
    </div>
</div>

<div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;">
    <img src="/search/img/cb-search.png"  id="search-btn"  title="Double click Ctrl"/>
</div>

<div class="navbar-wrapper">
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header page-scroll">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">Chuck</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a class="page-scroll" href="/blog/"></a></li>
                        
                            
                            <li>
                            
                            <a class="page-scroll" href="/blog/">Blog</a></li>
                        
                            
                            <li>
                            
                            <a class="page-scroll" href="/android/">Android</a></li>
                        
                            
                            <li>
                            
                            <a class="page-scroll" href="/java/">Java</a></li>
                        
                            
                            <li>
                            
                            <a class="page-scroll" href="/mac/">Mac</a></li>
                        
                    </ul>
                </div>
            </div>
        </nav>
</div>
<div id="inSlider" class="carousel carousel-fade" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#inSlider" data-slide-to="0" class="active"></li>
        <li data-target="#inSlider" data-slide-to="1"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <div class="container">
                <div class="carousel-caption">
                </div>
                <div class="carousel-image wow zoomIn">
                    <!-- <img src="static/img/landing/laptop.png" alt="laptop"/> -->
                </div>
            </div>
            <!-- Set background for slide in css -->
            <div class="header-back one"></div>

        </div>
        <div class="item">
            <div class="container">
                <div class="carousel-caption blank">
                </div>
            </div>
            <!-- Set background for slide in css -->
            <div class="header-back two"></div>
        </div>
    </div>
    <a class="left carousel-control" href="#inSlider" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#inSlider" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

	

    <div class="wrapper wrapper-content  animated fadeInRight article">
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="pull-right">
                    	
                        	<button class="btn btn-white btn-xs" type="button">Java</button>
                        
                    </div>
                    <div class="text-center article-title">
                    <span class="text-muted"><i class="fa fa-clock-o"></i> 13 Dec 2016</span>
                        <h1>
                            RxJava操作符之Creating Observables
                        </h1>
                    </div>
                    	<p>RxJava 是一个在Java虚拟机上实现的响应式扩展库：提供了基于observable序列实现的异步调用及基于事件编程。 它扩展了观察者模式，支持数据、事件序列并允许你合并序列，无需关心底层的线程处理、同步、线程安全、并发数据结构和非阻塞I/O处理。</p>

<p>　　官网定义：RxJava is a Java VM implementation of Reactive Extensions: a library for composing asynchronous and event-based programs by using observable sequences.</p>

<p>　　如果没有接触过响应式编程，看起来会难以理解。但是，一旦上手之后，你会发觉用起来很爽。在Android中可以使用RxAndroid轻松实现线程切换，轻松写出优雅的代码。不过这都建立在熟练使用的基础上的。</p>

<p>　　本文不是讲解RxJava的原理的，而是RxJava另一重要的内容，功能强大、丰富的操作符。</p>

<p>　　将会以下分类用一系列的文章,介绍这些操作符</p>

<p>　　1.Creating Observables</p>

<p>　　2.Transforming Observables</p>

<p>　　3.Filtering Observables</p>

<p>　　4.Combining Observables</p>

<p>　　5.Error Handling Operators</p>

<p>　　6.Observable Utility Operators</p>

<p>　　7.Conditional and Boolean Operators</p>

<p>　　8.Mathematical and Aggregate Operators</p>

<p>　　9.Connectable Observable Operators</p>

<p>　　10.Backpressure Operators</p>

<p>　　从Create Observables类操作符开始讲起吧，顾名思义这类操作符都是可以得到Observable的。主要包括：</p>

<p>　　1.Create</p>

<p>　　2.Defer</p>

<p>　　3.Empty/Never/Throw</p>

<p>　　4.From</p>

<p>　　5.Interval</p>

<p>　　6.Just</p>

<p>　　7.Range</p>

<p>　　8.Repeat</p>

<p>　　9.Timer</p>

<p>　<strong>create操作符</strong></p>

<p>　　create操作符是最基本的操作符，可以在合适的时机调用subscriber的onNext，onError，onComplete方法。下图是官方给的create的原理图（本系列所用的原理图都是官方所给的）：</p>

<p>　　<img src="http://img.blog.csdn.net/20160622212041814" width="400" height="200" /></p>

<p>　　onNext就是发射数据给Subscriber; onComplete用来通知Subscriber所有的数据都已发射完毕；onError是在发生错误的时候发射一个Throwable对象给Subscriber。这里要注意一下，Observable在需要调用OnComplete方法时，必须通知所有订阅其的Subscriber，之后Observable将不再发射数据，OnError也是同样的。接下来看看具体的代码，为了方便看代码，部分代码暂时没有使用Lamda表达式：</p>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">createObservable</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">subscriber</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span><span class="n">subscriber</span><span class="o">.</span><span class="na">isUnsubscribed</span><span class="o">())</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">subscriber</span><span class="o">.</span><span class="na">onError</span><span class="o">(</span><span class="k">new</span> <span class="n">Throwable</span><span class="o">());</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">subscriber</span><span class="o">.</span><span class="na">onCompleted</span><span class="o">();</span>
                    <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                        <span class="n">subscriber</span><span class="o">.</span><span class="na">onNext</span><span class="o">(</span><span class="n">num</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="n">btn_create</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">v1</span> <span class="o">-&gt;</span> <span class="n">createObservable</span><span class="o">()</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"create"</span><span class="o">,</span> <span class="s">"onComplete"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"create"</span><span class="o">,</span> <span class="s">"onError"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"create"</span><span class="o">,</span> <span class="n">s</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}));</span>
</code></pre>
</div>

<p>　执行结果</p>

<div class="highlighter-rouge"><pre class="highlight"><code>create: 4
create: 5
create: 0
create: 3
create: 1
create: 5
create: onError
create: 4
create: 4
create: 1
create: onComplete
</code></pre>
</div>
<p>　　以上结果是执行了3次的结果，第一次顺利执行，第二次触发了onError后Observable就停止发射数据了，第三次可以看到触发同样在触发onComplete后就停止发射数据了。</p>

<p><strong>defer/just</strong></p>

<p>　　defer操作符只有当有Subscriber来订阅的时候才会创建一个新的Observable对象,也就是说每次订阅都会得到一个刚创建的最新的Observable对象，这可以确保Observable对象里的数据是最新的,看原理图：</p>

<p>　　<img src="http://img.blog.csdn.net/20160622221541792" width="400" height="200" /></p>

<p>　　just操作符将某个对象转化为Observable对象，这些对象可以是一个数字、一个字符串、数组、Iterate，并且将其<strong>一次性</strong>发射出去，是一种非常快捷的创建Observable对象的方法。</p>

<p><img src="http://img.blog.csdn.net/20160622221846652" width="400" height="200" /></p>

<p>　　下面通过代码来认识一下他们之间的区别</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Observable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="n">justObservable</span><span class="o">=</span><span class="n">justOperator</span><span class="o">();</span>
        <span class="n">Observable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="n">deferObservable</span><span class="o">=</span><span class="n">deferOperator</span><span class="o">();</span>
        <span class="n">Button</span> <span class="n">btn_defer</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_defer_oper</span><span class="o">);</span>
        <span class="n">btn_defer</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">v</span><span class="o">-&gt;</span><span class="n">deferObservable</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
<span class="c1">//                        Log.e("defer", "onComplete");</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"defer"</span><span class="o">,</span> <span class="s">"onError"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">Integer</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"defer"</span><span class="o">,</span> <span class="n">i</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}));</span>
        <span class="n">Button</span> <span class="n">btn_just</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_just_oper</span><span class="o">);</span>
        <span class="n">btn_just</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">v</span><span class="o">-&gt;</span><span class="n">justObservable</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
<span class="c1">//                        Log.e("just", "onComplete");</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"just"</span><span class="o">,</span> <span class="s">"onError"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">Integer</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"just"</span><span class="o">,</span> <span class="n">i</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}));</span>
<span class="kd">private</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="n">deferOperator</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">defer</span><span class="o">(()-&gt;</span><span class="n">Observable</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="k">new</span> <span class="n">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">)));</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">justOperator</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="k">new</span> <span class="n">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
    <span class="o">}</span>
</code></pre>
</div>

<p>运行结果：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>defer: 43
defer: 97
defer: 23
just: 98
just: 98
just: 98
</code></pre>
</div>
<p>　　正如上文所说，defer只有在subscibe时才会生成Observable，以保证是最新的数据，而just无论订阅几次都是用的首次创建的Observable对象。</p>

<p><strong>from</strong></p>

<p>　　 from操作符用来将某个对象转化为Observable对象，并且<strong>依次</strong>将其内容发射出去。听起来和just很像，那么它到底和just有什么不一样，这个类似于just，但是just会将这个对象整个发射出去。比如说一个含有10个数字的数组，使用from就会发射10次，每次发射一个数字，而使用just会发射一次来将整个的数组发射出去。</p>

<p><img src="http://img.blog.csdn.net/20160622223446330" width="400" height="200" /></p>

<p>　　代码：
　　</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">dataList</span><span class="o">=</span><span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
 <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initData</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">dataList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"welcome"</span><span class="o">);</span>
        <span class="n">dataList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"to"</span><span class="o">);</span>
        <span class="n">dataList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Rxjava"</span><span class="o">);</span>
    <span class="o">}</span>
 <span class="kd">private</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">fromOperator</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">dataList</span><span class="o">);</span>
    <span class="o">}</span>
<span class="n">Button</span> <span class="n">btn_from</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_from_oper</span><span class="o">);</span>
        <span class="n">btn_from</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="n">fromOperator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"from"</span><span class="o">,</span> <span class="s">"onCompleted"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"from"</span><span class="o">,</span> <span class="s">"onError"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"from"</span><span class="o">,</span> <span class="n">s</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}));</span>
</code></pre>
</div>
<p>　　执行结果：
　　</p>

<div class="highlighter-rouge"><pre class="highlight"><code>from: welcome
from: to
from: Rxjava
from: onCompleted
</code></pre>
</div>

<p><strong>Empty/Never/Throw</strong></p>

<p>　　这三个操作符都是很简单的，就拿Empty来说吧，创建一个Observable，不会发射任何的数据，但是会正常的执行OnComplete，也就是说创建了一个Empty的Observable。</p>

<p>　　<img src="http://img.blog.csdn.net/20160622224100192" width="400" height="200" /></p>

<p>代码：
　　</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="n">Observable</span> <span class="nf">emptyOperator</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
    <span class="o">}</span>
     <span class="n">Button</span> <span class="n">btn_empty</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_empty_oper</span><span class="o">);</span>
        <span class="n">btn_empty</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="n">emptyOperator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"empty"</span><span class="o">,</span> <span class="s">"onCompleted"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"empty"</span><span class="o">,</span> <span class="s">"onError"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">Object</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"empty"</span><span class="o">,</span> <span class="n">s</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}));</span>
</code></pre>
</div>
<p>　　
　　执行结果：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>empty: onCompleted
</code></pre>
</div>
<p>　　由于篇幅原因，有兴趣的可以自己去看看其他两个的实现。</p>

<p><strong>Range</strong></p>

<p>　　Range操作符根据输入的初始值n和数目m发射一系列大于等于n的m个值。</p>

<p>　　<img src="http://img.blog.csdn.net/20160622224543723" width="400" height="200" /></p>

<p>　　具体的使用：</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Button</span> <span class="n">btn_range</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_range_oper</span><span class="o">);</span>
        <span class="n">btn_range</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="n">rangeOperator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"range"</span><span class="o">,</span> <span class="s">"onCompleted"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"range"</span><span class="o">,</span> <span class="s">"onError"</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">Object</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"range"</span><span class="o">,</span> <span class="n">s</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}));</span>
                 <span class="kd">private</span> <span class="n">Observable</span> <span class="nf">rangeOperator</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre>
</div>

<p>执行结果</p>

<div class="highlighter-rouge"><pre class="highlight"><code>range: 1
range: 2
range: 3
range: 4
range: 5
range: 6
range: 7
range: 8
range: 9
range: 10
range: onCompleted
</code></pre>
</div>

<p><strong>Interval</strong></p>

<p>　　Interval所创建的Observable对象会从0开始，每隔固定的时间发射一个数字。在Android这个对象默认是运行在<strong>computation Scheduler</strong>,所以如果需要在view中显示结果，需要在切换回主线程。</p>

<p>　　<img src="http://img.blog.csdn.net/20160622225515924" width="400" height="200" /></p>

<p>　　Interval的用法有很多，在Android可以轻松实现计时器的功能，那么在使用时也有很多要注意的地方，除了上边说的要注意线程的问题，还有就是在Activity中使用的时候，需要在合适的时机进行反注册。否则可能会造成内存溢出。
 　　</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Observable</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">observable</span> <span class="o">=</span> <span class="n">interval</span><span class="o">();</span>

        <span class="n">Subscriber</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">subscriber</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscriber</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCompleted</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="s">"onCompleted"</span> <span class="o">);</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"onError:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNext</span><span class="o">(</span><span class="n">Long</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"interval:"</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">};</span>
        <span class="n">sButton</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="n">observable</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">subscriber</span><span class="o">));</span>
        <span class="n">unSButton</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="n">subscriber</span><span class="o">.</span><span class="na">unsubscribe</span><span class="o">());</span>
        
<span class="kd">private</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="nf">interval</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Observable</span><span class="o">.</span><span class="na">interval</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">)</span>
        <span class="o">.</span><span class="na">observeOn</span><span class="o">(</span><span class="n">AndroidSchedulers</span><span class="o">.</span><span class="na">mainThread</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre>
</div>
<p>执行结果：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>inerval：0
inerval：1
inerval：2
......
</code></pre>
</div>
<p><strong>Repeat/Timer</strong></p>

<p>　　Repeat会重复发射一个Observable对象，并且可以指定其发射的次数。</p>

<p>　　<img src="http://img.blog.csdn.net/20160622230420234" width="400" height="200" /></p>

<p>　　 Timer会在指定时间后发射一个指定类型的数据，例如如果我们指定的是Long，那么它会发射一个0。同interval一样，其也是运行在computation Scheduler中的。注意切换主线程。</p>

<p>　　 <img src="http://img.blog.csdn.net/20160622230644172" width="400" height="200" /></p>

<p>　　 这都是非常简单的操作符，代码就不上了。试试就可以很清楚了。创建Observable的操作符常用的就这些了，下次将介绍Transforming Observables转换类的操作符。</p>

                    <hr>
                    <div class="row">
                        <div class="col-md-6">
                                <h5 style="display: inline;">Tags:</h5>
                                
                                    <button class="btn btn-white btn-xs" type="button">Rxjava</button>
                                
                                    <button class="btn btn-white btn-xs" type="button">操作符</button>
                                
                        </div>
                        <div class="col-md-6">
                            <div class="small text-right">
                                <h5>Stats:</h5>
                                <div> 
                                
                                
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12">
                            <!-- donate -->
                            
                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal2">
    Donate
</button>
<div class="modal inmodal" id="myModal2" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content animated flipInY">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Donate Me</h4>
                <small class="font-bold">Thanks for your support!</small>
            </div>
            <div class="modal-body">
                <div class="tabbable" id="tabs-960227">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#panel-405278" data-toggle="tab">Alipay</a>
                        </li>
                        <li>
                            <a href="#panel-874705" data-toggle="tab">Wechat</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="panel-405278">
                            <div class="text-center">
                                <img src="/static/img/pay/alipay.png"" height="250" width="250">
                            </div>    
                        </div>
                        <div class="tab-pane" id="panel-874705">
                            <div class="text-center">
                                <img src="/static/img/pay/wechat.png"" height="250" width="250">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

                            
                            <br>
                            <!-- share -->
                            
                                <h2>Share:</h2>

<div class="bshare-custom">
	<a title="分享到微信" class="bshare-weixin"></a>
	<a title="分享到QQ空间" class="bshare-qzone"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog"></a>
	<a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
</div>
<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=3388a8e1-75a8-4d5f-9b83-552bfba42fd1&amp;pophcol=1&amp;lang=zh"></script>
<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
                            
                            <br>
                            <!-- comment -->
                            

<!--  start -->
	<div class="ds-thread" data-thread-key="/java/2016/12/13/rxjava-creating-observables" data-title="RxJava操作符之Creating Observables" data-url="http://localhost:4000+/java/2016/12/13/rxjava-creating-observables.html"></div>
<!--  end -->
<!-- JS start () -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"weiweick"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- JS end -->

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>


	
	    <script src="/static/js/scroll.js"></script>

<!-- Baidu analytics -->

  <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?5452f458cd7817ced78b5c6daa1a82e4";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
  </script>


<!-- Google analytics -->





<script async src="/static/js/count_page.js"></script>

	

</body>
</html>